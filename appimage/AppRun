#!/bin/bash

# Get the directory where the AppImage is mounted
HERE="$(dirname "$(readlink -f "${0}")")"

# Create config directory in user's home
CONFIG_DIR="$HOME/.tui_proxy_client"
mkdir -p "$CONFIG_DIR"

# Copy config files to writable location if they don't exist
if [ ! -f "$CONFIG_DIR/config.json" ] && [ -f "$HERE/usr/bin/config.json" ]; then
    cp "$HERE/usr/bin/config.json" "$CONFIG_DIR/"
fi

if [ ! -f "$CONFIG_DIR/configs.json" ] && [ -f "$HERE/usr/bin/configs.json" ]; then
    cp "$HERE/usr/bin/configs.json" "$CONFIG_DIR/"
fi

# Set the working directory to the config directory
cd "$CONFIG_DIR"

# Execute the application
exec "$HERE/usr/bin/tui_proxy_client" "$@" 